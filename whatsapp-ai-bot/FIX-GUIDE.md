# ğŸ”§ ××“×¨×™×š ×ª×™×§×•×Ÿ ×”×‘×•×˜ - ×¦×¢×“×™× ×—×™×•× ×™×™×

## ğŸ¯ ×”××¦×‘ ×”× ×•×›×—×™

âœ… ×”×¡×¨×‘×¨ ×¨×¥ ×¢×œ port 8080
âœ… localtunnel ×¤×¢×™×œ: `https://curly-fly-3.loca.lt`
âœ… Webhook ××•××ª ×‘-Meta
âŒ ×”×‘×•×˜ ×œ× ××§×‘×œ ×”×•×“×¢×•×ª ×-WhatsApp
âŒ ×”-Token ×œ× ×™×›×•×œ ×œ×©×œ×•×— ×”×•×“×¢×•×ª

---

## ğŸš¨ ×©×œ×‘ 1: Subscribe ×œWebhook Fields (×§×¨×™×˜×™!)

**×–×” ×”×©×œ×‘ ×©×—×¡×¨! ×‘×œ×™ ×–×” Meta ×œ× ×™×©×œ×— ×œ×š ×”×•×“×¢×•×ª.**

1. **×œ×š ×œ:** https://developers.facebook.com/apps
2. **×‘×—×¨ ××ª ×”××¤×œ×™×§×¦×™×” ×©×œ×š**
3. **×œ×š ×œ:** WhatsApp â†’ Configuration
4. **×’×œ×•×œ ×œ××˜×” ×œ-"Webhook fields"**
5. **×ª×—×ª "messages"** - ×œ×—×¥ **"Subscribe"** âœ…
6. **×ª×—×ª "message_status"** (××•×¤×¦×™×•× ×œ×™) - ×œ×—×¥ **"Subscribe"** âœ…

### ××™×š ×–×” × ×¨××”:

```
Webhook fields
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â˜ messages             [Subscribe] â† ×œ×—×¥ ×›××Ÿ!
â˜ message_status       [Subscribe] â† ××•×¤×¦×™×•× ×œ×™
â˜ messaging_postbacks  [Subscribe]
```

**âš ï¸ ×‘×œ×™ ×”-Subscribe, Meta ×œ× ×™×©×œ×— ×”×•×“×¢×•×ª ×œ×¡×¨×‘×¨ ×©×œ×š!**

---

## ğŸ”‘ ×©×œ×‘ 2: ×§×‘×œ Token ×—×“×© ×¢× ×”×¨×©××•×ª (×§×¨×™×˜×™!)

×”-Token ×”× ×•×›×—×™ **×œ× ×™×›×•×œ ×œ×©×œ×•×— ×”×•×“×¢×•×ª**. ××ª×” ×¦×¨×™×š Token ×—×“×©.

### ××™×š ×œ×™×¦×•×¨ Token ×—×“×©:

1. **×œ×š ×œ:** https://developers.facebook.com/apps
2. **×‘×—×¨ ××ª ×”××¤×œ×™×§×¦×™×”**
3. **×œ×š ×œ:** WhatsApp â†’ API Setup
4. **×œ×—×¥ ×¢×œ:** "Generate Access Token" ××• "Get Temporary Token"
5. **×•×“× ×©×™×© ×”×¨×©××•×ª:**
   - âœ… `whatsapp_business_messaging`
   - âœ… `whatsapp_business_management`
6. **×”×¢×ª×§ ××ª ×”Token ×”×—×“×©**

### ×¢×“×›×Ÿ ××ª ×”-Token ×‘-.env:

```bash
cd "C:\Users\hovav\Desktop\×¢×‘×•×“×” ×©×œ ××™×›××œ\nu-dating\whatsapp-ai-bot"
notepad .env
```

**×”×—×œ×£ ××ª ×”Token ×”×™×©×Ÿ ×‘-Token ×”×—×“×©:**

```env
WHATSAPP_TOKEN=YOUR_NEW_TOKEN_HERE_WITH_PERMISSIONS
```

**×©××•×¨ ×•×¡×’×•×¨ ××ª ×”×§×•×‘×¥.**

---

## ğŸ”„ ×©×œ×‘ 3: ×”×¤×¢×œ ××—×“×© ××ª ×”×¡×¨×‘×¨

××—×¨×™ ×©×¢×“×›× ×ª ××ª ×”-Token, ×”×¤×¢×œ ××—×“×©:

```bash
# ×¢×¦×•×¨ ××ª ×”×¡×¨×‘×¨ ×”× ×•×›×—×™ (Ctrl+C ×‘××¡×•×£ ×©×¨×¥)
# ××• ×¡×’×•×¨ ××ª ×”×—×œ×•×Ÿ

# ×”×¨×¥ ×©×•×‘:
cd "C:\Users\hovav\Desktop\×¢×‘×•×“×” ×©×œ ××™×›××œ\nu-dating\whatsapp-ai-bot"
npm run start:cloud
```

---

## ğŸ“ ×©×œ×‘ 4: ×‘×“×™×§×”

1. **×©×œ×— ×”×•×“×¢×”** ××”×˜×œ×¤×•×Ÿ ×©×œ×š ×œ××¡×¤×¨ ×”×‘×•×˜ ×‘-WhatsApp
2. **×‘×“×•×§ ××ª ×”×œ×•×’×™×** - ××ª×” ×××•×¨ ×œ×¨××•×ª:
   ```
   ğŸ“¨ Incoming WhatsApp message
   ğŸ“¤ Processing with Gemini...
   âœ… Response sent successfully
   ```
3. **×§×‘×œ ×ª×©×•×‘×”** ××”×‘×•×˜ ×‘-WhatsApp! ğŸ‰

---

## ğŸ› ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª

### ×”×‘×•×˜ ×¢×“×™×™×Ÿ ×œ× ××’×™×‘?

**×‘×“×•×§ ×©×¢×©×™×ª Subscribe ×‘-Meta:**
- ×œ×š ×œ-WhatsApp â†’ Configuration
- ×•×“× ×©×™×© âœ… ×œ×™×“ "messages"

**×‘×“×•×§ ×©×”-Token ×—×“×©:**
- ×”-Token ×”×—×“×© ×¦×¨×™×š ×œ×”×ª×—×™×œ ×‘-`EAA...`
- ×•×“× ×©×™×© ×œ×• ×”×¨×©××•×ª `whatsapp_business_messaging`

**×‘×“×•×§ ××ª ×”×œ×•×’×™×:**
- ×× ××ª×” ×¨×•××” ×”×•×“×¢×•×ª × ×›× ×¡×•×ª ××‘×œ ×œ× ×™×•×¦××•×ª = ×‘×¢×™×™×ª Token
- ×× ××ª×” ×œ× ×¨×•××” ×”×•×“×¢×•×ª × ×›× ×¡×•×ª = ×‘×¢×™×™×ª Subscribe

### ×©×’×™××ª "(#10) Application does not have permission"

**×–×” ××•××¨ ×©×”-Token ×œ× ××¢×•×“×›×Ÿ.** ×—×–×•×¨ ×œ×©×œ×‘ 2 ×•×§×‘×œ Token ×—×“×©.

### Webhook verification failed

**×•×“× ×©:**
- ×”×¡×¨×‘×¨ ×¨×¥ ×¢×œ port 8080
- localtunnel ×¤×¢×™×œ
- ×”-URL ×‘-Meta: `https://curly-fly-3.loca.lt/webhook`
- Verify Token: `my_verify_token_123`

---

## ğŸ“± ××¡×¤×¨ ×”×‘×•×˜ ×©×œ×š

××¡×¤×¨ ×”×˜×œ×¤×•×Ÿ ×©×œ ×”×‘×•×˜ (Phone Number ID):
```
954930261042928
```

×–×” ×”××¡×¤×¨ ×©×× ×©×™× ×™×©×œ×—×• ××œ×™×• ×”×•×“×¢×•×ª.

---

## âœ… ×¨×©×™××ª ×‘×“×™×§×” ××”×™×¨×”

- [ ] Subscribe ×œ-"messages" ×‘-Meta Console
- [ ] Token ×—×“×© ×¢× ×”×¨×©××•×ª `whatsapp_business_messaging`
- [ ] ×¢×“×›×Ÿ .env ×¢× Token ×—×“×©
- [ ] ×”×¤×¢×œ ××—×“×© ××ª ×”×¡×¨×‘×¨
- [ ] ×©×œ×— ×”×•×“×¢×ª ×‘×“×™×§×” ×‘-WhatsApp
- [ ] ×§×‘×œ ×ª×©×•×‘×” ××”×‘×•×˜! ğŸ‰

---

## ğŸ†˜ ×¢×–×¨×” × ×•×¡×¤×ª

×× ××©×”×• ×œ× ×¢×•×‘×“, ×‘×“×•×§:
1. **Meta Developer Console** - Status ×©×œ Token ×•App
2. **Server logs** - ×©×’×™××•×ª ××• ×”×•×“×¢×•×ª
3. **Webhook status** - ×•×“× ×©×”-subscription ×¤×¢×™×œ

---

**×”×¦×œ×—×”! ğŸš€**
